<div class="view">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h3 style="font-size: 2.1rem; text-shadow: 0 2px 8px rgba(0,0,0,0.18); font-weight: 800; color: var(--text-primary);"><span class="material-icons me-2" style="color:#1971c2;">pie_chart</span>Grafico Diagnosi Filtrato</h3>
                    <button class="btn btn-sm btn-back-menu" data-view="home">
                        <span class="material-icons me-1" style="vertical-align: text-bottom;">arrow_back</span>Torna al Menu
                    </button>
                </div>
                <div class="card-body grafico-body" style="max-width: none; width: 100%;">
                    <!-- Filtri -->
                    <fieldset class="filters-fieldset mb-4">
                        <legend>Filtri Grafico</legend>
                        <div class="row g-3">
                            <!-- Prima riga di filtri -->
                            <div class="col-md-4">
                                <label for="filter-reparto" class="form-label">Reparto Appartenenza</label>
                                <select id="filter-reparto" name="filter-reparto" class="form-select" data-custom="true"></select>
                            </div>
                            <div class="col-md-4">
                                <label for="filter-provenienza" class="form-label">Reparto Provenienza</label>
                                <select id="filter-provenienza" name="filter-provenienza" class="form-select" data-custom="true"></select>
                            </div>
                            <div class="col-md-4">
                                <label for="filter-diagnosi" class="form-label">Diagnosi</label>
                                <select id="filter-diagnosi" name="filter-diagnosi" class="form-select" data-custom="true"></select>
                            </div>
                        </div>
                        <div class="row g-3 mt-3">
                            <!-- Seconda riga di filtri -->
                            <div class="col-md-3">
                                <label for="filter-assistenza" class="form-label">Livello Assistenza</label>
                                <select id="filter-assistenza" name="filter-assistenza" class="form-select" data-custom="true">
                                    <option value="">Tutti</option>
                                    <option value="Bassa">Bassa</option>
                                    <option value="Media">Media</option>
                                    <option value="Alta">Alta</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="filter-infetto" class="form-label">Infetto</label>
                                <select id="filter-infetto" name="filter-infetto" class="form-select" data-custom="true">
                                    <option value="">Tutti</option>
                                    <option value="true">Sì</option>
                                    <option value="false">No</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="filter-start-date" class="form-label">Ricovero Dal</label>
                                <div class="input-group-icon">
                                    <input type="text" id="filter-start-date" name="filter-start-date" class="form-control" data-datepicker placeholder="gg/mm/aaaa">
                                    <span class="material-icons input-icon">calendar_today</span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label for="filter-end-date" class="form-label">Ricovero Al</label>
                                <div class="input-group-icon">
                                    <input type="text" id="filter-end-date" name="filter-end-date" class="form-control" data-datepicker placeholder="gg/mm/aaaa">
                                    <span class="material-icons input-icon">calendar_today</span>
                                </div>
                            </div>
                        </div>
                        <!-- Pulsanti -->
                        <div class="row mt-3">
                            <div class="col-12 d-flex justify-content-center align-items-center gap-2 gap-md-3 flex-wrap">
                                <button id="apply-filters-btn" class="btn btn-custom-info px-4">
                                    <span class="material-icons me-1">filter_alt</span>
                                    Applica
                                </button>
                                <button id="reset-filters-btn" class="btn btn-custom-info px-4">
                                    <span class="material-icons me-1">refresh</span>
                                    Resetta
                                </button>
                                <!-- Il selettore tipo grafico verrà spostato qui -->
                            </div>
                        </div>
                    </fieldset>
                    <!-- Contenitore Grafico -->
                    <div id="chart-container" class="chart-container chart-gradient force-light">
                        <div class="d-flex justify-content-center align-items-center h-100">
                            <p class="text-muted">Seleziona i filtri e clicca "Applica" per visualizzare il grafico.</p>
                        </div>
                    </div>
                    
                    <!-- Pulsanti Export sotto il grafico -->
                    <div id="chart-buttons-container" class="text-center mt-4 mb-3">
                        <!-- I pulsanti verranno inseriti dinamicamente qui -->
                    </div>
                </div>
            </div>
        </div>