/* ===================================
   MOBILE COMPONENTS - Micro-interazioni e Stati
   =================================== */

@media (max-width: 767px) {
    /* === MICRO-INTERAZIONI MODERNE === */

    /* Ripple effect al tocco */
    .card, .btn { /* Applicato anche ai bottoni */
        position: relative !important;
        overflow: hidden !important;
    }

    .card::before, .btn::before {
        content: '' !important;
        position: absolute !important;
        top: 50% !important;
        left: 50% !important;
        width: 0 !important;
        height: 0 !important;
        border-radius: 50% !important;
        background: rgba(var(--primary-rgb, 255, 255, 255), 0.3) !important;
        transform: translate(-50%, -50%) !important;
        transition: width 0.6s, height 0.6s !important;
        z-index: 0 !important;
    }

    .card:active::before, .btn:active::before {
        width: 300px !important;
        height: 300px !important;
    }

    .card-header,
    .card-body,
    .btn > * { /* Assicura che il contenuto del bottone sia sopra l'effetto */
        position: relative !important;
        z-index: 1 !important;
    }

    /* === STATI DEI COMPONENTI === */

    /* Loading states */
    .loading {
        opacity: 0.7 !important;
        pointer-events: none !important;
        position: relative !important;
    }

    .loading::after {
        content: '' !important;
        position: absolute !important;
        top: 50% !important;
        left: 50% !important;
        width: 20px !important;
        height: 20px !important;
        border: 2px solid var(--border-color) !important;
        border-top: 2px solid var(--primary-color) !important;
        border-radius: 50% !important;
        transform: translate(-50%, -50%) !important;
        animation: spin 1s linear infinite !important;
        z-index: 2 !important;
    }

    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* === ELEVATION SYSTEM MOBILE === */
    
    .elevation-1, .elevation-2 {
        box-shadow: var(--shadow-sm) !important;
    }
    
    .elevation-3, .elevation-4 {
        box-shadow: var(--shadow-md) !important;
    }
    
    .elevation-5 {
        box-shadow: var(--shadow-lg) !important;
    }

    /* === ACCESSIBILITÀ E PERFORMANCE === */

    /* Touch areas ottimizzate e prevenzione double-tap zoom */
    .card, .btn, .modal-content, a {
        touch-action: manipulation;
    }

    /* Focus migliorato per navigation via tastiera */
    .card:focus, 
    .btn:focus,
    .form-control:focus,
    .btn-close:focus,
    a:focus {
        outline: 3px solid var(--primary-color) !important;
        outline-offset: 2px !important;
    }

    /* Migliora la leggibilità su mobile */
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Disabilita backdrop-filter su mobile per performance */
    .card, .modal-content {
        backdrop-filter: none !important;
    }

    /* Hardware acceleration per smooth scrolling e interazioni */
    .card, .btn, .modal-content, .form-control {
        will-change: transform;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }

    /* Riduci animazioni complesse su mobile */
    @media (prefers-reduced-motion: reduce) {
        .card, .btn, .modal.fade .modal-dialog {
            transition: none !important;
        }
    }
}